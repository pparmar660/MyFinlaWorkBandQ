<div ng-show="offenderDetailShowStatus" id="203" ng-controller="offenderDetail">
    <div  ng-hide="showLinkedModule">
        <div ng-model="offender">
            <div class="clr"></div>
            <div class="global_Load_head">
                <div class="text_wrap">
                    <div class="icon">
                        <div class="center-icon on-icons">
                            <div class="circle-icon">
                                <div class="v-m">
                                    <span class="d-icon d-icon2"></span>
                                </div>
                            </div>  
                        </div>
                    </div>
                    <div class="text_head">
                        <h1><span>Offender:</span> {{offender.firstname_usr + " " + offender.middlename_usr + " " + offender.lastname_usr}} <strong >{{offenderStatus}}</strong> </h1>
                    </div>								
                </div>
                <div class="edit_btn_wrap">
                    <div class="btn-group sl-icons icon-btn">
                        <div class="wrap-btn">					
                            <button class="button btn-orange btn-block radius" type="button" ng-click="editOffender()">	
                                <span class="v-flex">								  
                                    <span class="btn-txt">Edit</span>
                                    <span class="circle-flex">
                                        <span class="s-btn-icon"><i class="fa fa-edit"></i></span>			
                                    </span>
                                </span>
                            </button>
                        </div>								  
                    </div>
                </div>	
                <p>Last updated: {{offenderLastUpdate}}</p>							
            </div>
            <div class="incident_report_tab of_detail_view">
                <div class="offender_slider_wrap">
                    <div ng-if="images.length > 0" class="carousel-demo-fullscreen">
                        <ul rn-carousel rn-carousel-controls rn-carousel-buffered class="carousel1" rn-carousel-index="imageIndex">
                            <li id="tags-list" ng-repeat="image in images track by $index" ng-class="'id-' + {{$index}}">
                                <img  ng-src="{{image.imageurl}}"  custom-click="imageLargeView(image);"/> 
                            </li>

                        </ul>
                    </div>
                    <div ng-if="images.length == 0" class="carousel-demo-fullscreen">
                        <img src="images/profile_img_1.jpg"/> 
                    </div>
                </div>
                <div class="offender_details"> 
                    <div class="angTabWrapper">
                        <tabs>
                            <pane title="Characteristics">
                                <div>
                                    <div class="tab_content">
                                        <ul class="o_d_l">
                                            <li>
                                                <p><span>{{FormFieldLabelData.offender[7].lable_name}}</span> <strong ng-bind-html="offender.gender_title"></strong></p>
                                            </li>
                                            <li>
                                                <p><span>{{FormFieldLabelData.offender[31].lable_name}}</span> <strong ng-bind-html="offender.ethnicity"></strong></p>
                                            </li>
                                            <li>
                                                <p><span>{{FormFieldLabelData.offender[76].lable_name}}</span> <strong ng-bind-html="offender.facial_hair_title"></strong></p>
                                            </li>
                                            <li>
                                                <p><span>{{FormFieldLabelData.offender[69].lable_name}}</span> <strong ng-bind-html="offender.height_title"></strong></p>
                                            </li>
                                            <li>
                                                <p><span>{{FormFieldLabelData.offender[74].lable_name}}</span> <strong ng-bind-html="offender.hair_color_title"></strong></p>
                                            </li>
                                            <li>
                                                <p><span>{{FormFieldLabelData.offender[71].lable_name}}</span> <strong ng-bind-html="offender.weight_title">,</strong></p>
                                            </li>
                                            <li>
                                                <p><span>{{FormFieldLabelData.offender[129].lable_name}}</span> <strong ng-bind-html="offender.glasses_title"></strong></p>
                                            </li>
                                            <li>
                                                <p><span>{{FormFieldLabelData.offender[77].lable_name}}</span> <strong ng-bind-html="offender.eye_color_title"></strong></p>
                                            </li>
                                            <li>
                                                <p><span>{{FormFieldLabelData.offender[135].lable_name}}</span> <strong ng-bind-html="offender.piercing_usr_title"></strong></p>
                                            </li>
                                            <li>
                                                <p><span>{{FormFieldLabelData.offender[136].lable_name}}</span> <strong ng-bind-html="offender.tattoo_usr_title"></strong></p>
                                            </li>
                                            <li>
                                                <p><span>{{FormFieldLabelData.offender[137].lable_name}}</span> <strong ng-bind-html="offender.scar_usr_title"></strong></p>
                                            </li>
                                            <li>
                                                <p><span>{{FormFieldLabelData.offender[80].lable_name}}</span> <strong ng-bind-html="offender.clothing_usr"></strong></p>
                                            </li>
                                            <li>
                                                <p><span>{{FormFieldLabelData.offender[81].lable_name}}</span> <strong ng-bind-html="offender.char_notes_usr"></strong></p>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </pane>
                            <pane title="Personal Details">
                                <div>
                                    <div class="tab_content">
                                        <div class="contact-info-detail">
                                            <div class="left">
                                                <ul class="o_d_l">
                                                    <li><p><span>{{FormFieldLabelData.offender[1].lable_name}}</span> <strong ng-bind-html="offender.title_name"></strong></p></li>
                                                </ul>
                                            </div>                                          
                                            <div class="right">
                                                <ul class="o_d_l">
                                                    <li><p><span>{{FormFieldLabelData.offender[8].lable_name}}</span> <strong ng-bind-html="offender.dob_usr"></strong></p></li>
                                                </ul>
                                            </div>
                                            <div class="clr"></div>
                                            <h3>{{FormFieldLabelData.offender[142].lable_name}}</h3>
                                            <div ng-if="offenderDetail.form_identity" ng-repeat="off in offenderDetail.form_identity track by $index">

                                                <div class="left">
                                                    <ul class="o_d_l">
                                                        <li><p><span>ID:</span> <strong>{{off.idDis}}</strong></p></li>
                                                    </ul>
                                                </div>
                                                <div class="right">
                                                    <ul class="o_d_l">
                                                        <li ><p><span>Reference No:</span> <strong>{{off.form_identity_refernce}}</strong></p></li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                    </div> 
                                </div>
                            </pane>
                            <pane title="Contact Details">
                                <div>
                                    <div class="tab_content">
                                        <div class="contact-info-detail">
                                            <div class="right">
                                                <ul class="o_d_l">

                                                    <li ng-hide="true">
                                                        <p><span>Work Ext:</span> <strong ng-bind-html="offender.work_ext_usr"></strong></p>
                                                    </li>
                                                    <li ng-hide="true">
                                                        <p><span>Work DDI:</span> <strong ng-bind-html="offender.work_ddi_usr"></strong></p>
                                                    </li>
                                                </ul>
                                            </div>
                                            <div class="left">
                                                <ul class="o_d_l">
                                                    <li>
                                                        <p><span>Personal Phone:</span> <strong ng-bind-html="offender.p_tph_usr"></strong></p>
                                                    </li>
                                                    <li>
                                                        <p><span>Personal Mobile:</span> <strong ng-bind-html="offender.p_mob_usr"></strong></p>
                                                    </li>
                                                    <li>
                                                        <p><span>{{FormFieldLabelData.offender[50].lable_name}}</span> <strong ng-bind-html="offender.p_mail_usr"></strong></p>
                                                    </li>
                                                </ul>
                                            </div>
                                        </div>                                            
                                        <div class="contact-info-detail">
                                            <h3>Address</h3>
                                            <div class="left">

                                                <ul class="o_d_l">
                                                    <li>
                                                        <p><span>{{FormFieldLabelData.offender[17].lable_name}}</span> <strong ng-bind-html="offender.address_usr"></strong></p>
                                                    </li>
                                                    <li>
                                                        <p><span>{{FormFieldLabelData.offender[18].lable_name}}</span> <strong ng-bind-html="offender.address_2_usr"></strong></p>
                                                    </li>

                                                    <li>
                                                        <p><span>{{FormFieldLabelData.offender[19].lable_name}}</span> <strong ng-bind-html="offender.address_3_usr"></strong></p>
                                                    </li>
                                                    <li>
                                                        <p><span>{{FormFieldLabelData.offender[20].lable_name}}</span> <strong ng-bind-html="offender.postcode_usr"></strong></p>
                                                    </li> 
                                                    <li>
                                                        <p><span>{{FormFieldLabelData.offender[21].lable_name}}</span> <strong ng-bind-html="offender.name_cnt"></strong></p>
                                                    </li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </pane>
                            <pane title="Images &amp; Media">
                                <div>
                                    <div class="tab_content">
                                        <div class="contact-info-detail">
                                            <div class="up_img_wrap">
                                                <div class="col_4" ng-repeat="imgs in images track by $index| startFrom : 0">
                                                    <div class="files_upload_wrap">
                                                        <div class="image">
                                                            <img ng-src="{{imgs.imageurl}}" alt="img">
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="clr"></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </pane>
                        </tabs>
                    </div>
                </div>
            </div>
            <div class="incident_details" >
                <div class="incident_victims_details incident-victim-tabs" ng-show="showLinkedDetailsTab">
                    <div class="angTabWrapper orangeTabs">
                        <tabs >
                            <pane title="Incidents" id="incidentTab">
                                <div class="tab_content">
                                    <div class="vertical-scroll">
                                        <div class="o_d_t_wrap">
                                            <div ng-if="incidents" class="left" ng-repeat="incident in incidents track by $index" ng-click="openIncidentDetail(incident)">
                                                <ul>
                                                    <li><p><span>Reference:</span> <strong>{{incident.reference_no}}</strong></p></li>
                                                    <li><p><span>Category:</span> <strong>{{incident.category}}</strong></p></li>
                                                    <li><p><span>Outcome/Type:</span> <strong ng-if="incident.outcome != null">{{incident.outcome}}/{{incident.type}}</strong></p></li>
                                                    <li><p><span>Date:</span> <strong>{{incident.date}}</strong></p></li>
                                                    <li><p><span>Status:</span> <strong>{{incident.status}}</strong></p></li>	
                                                </ul>
                                            </div>
                                             <div ng-if="(incidents.length <= 0 || !incidents)"> No linked Incidents </div>
                                        </div>
                                    </div>
                                </div>
                            </pane>
                            <pane title="Vehicles" id="vehicleTab">
                                <div class="tab_content">
                                    <div ng-if="(data.vehicle.length <= 0 || !data.vehicle)"> No linked Vehicles </div>
                                    <div class="left-col1" ng-repeat="vehical in data.vehicle track by $index" ng-click="openVehicleDetail(vehical)">
                                        <div class="image-block">
                                            &nbsp;
                                            <div class="code-number">
                                                <div class="vertical-middle">
                                                    <span>{{vehical.licence_plate_vtk}}</span>
                                                </div>
                                            </div>

                                        </div>

                                        <div class="content-block">
                                            <p><span>{{vehical.plate_type}}</span></p>
                                            <p>Incidents:&nbsp;{{vehical.incident_linked}}</p>
                                            <p>Offenders:&nbsp;{{vehical.offender_linked}}</p>

                                        </div>
                                        <div class="title-name">
                                            <span>{{vehical.name}}</span>
                                        </div>
                                    </div>

                                </div>

                            </pane>
                            <pane title="Locations" id="locationTab">
                                <div class="tab_content" >
                                    <div ng-show="showMapInOffender"><div id="linkedMapOffenderDetail" alt="map" style="width:100%; height:300px;"></div></div>
                                    <div ng-hide="showMapInOffender">No Location available</div>
                                </div>
                            </pane>
                            <pane title="Linked Offenders" id="linkedOffenderTab">
                                <div class="tab_content">
                                    <div class="vertical-scroll" ng-show="(data.linked_offender.length > 0)">
                                        <div class="left-col1" ng-repeat="offender in data.linked_offender track by $index" ng-click="openOffenderDetail(offender)">
                                            <div class="image-block">
                                                <img ng-src="{{offender.image}}" alt="thumb-img" /> 
                                            </div>
                                            <div class="content-block">
                                                <p><span>{{offender.status}}</span></p>
                                                <p>Incidents:&nbsp;{{offender.linked_incident}}</p>
                                                <p>Vehicles:&nbsp;{{offender.linked_vehicle}}</p>
                                            </div>
                                            <div class="title-name">
                                                <span>{{offender.fullName}}</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div ng-show="(data.linked_offender.length <= 0 || !data.linked_offender)" > No linked Offenders 
                                    </div>
                                </div>

                            </pane>
                        </tabs>
                    </div>
                </div>

                <div class="incident_notes_wrap" ng-hide="(offender.add_comm == 0 && offender.has_task == 0)">
                      <div class="angTabWrapper orangeTabs">
                        <tabs>
                            <pane title="Notes &amp; Comms" id="commsTab">
                                <div class="tab_content">
                                <div class="comms_notes_wrap">
                                    <div ng-if="showComms" ng-repeat="comm in commsNote track by $index">
                                        <div class="notes_wrap" ng-class-even="'next_line'">
                                            <div class="notes_wrap_img">
                                                <img ng-src="{{staffImage}}" alt="news"/> 
                                            </div>
                                            <div class="notes_wrap_content">
                                                <div class="notes_wrap_text">
                                                    <h3>{{comm.note_title}}</h3> 
                                                    <p>{{comm.message}}</p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div ng-if="!showComms">{{commsNote}}</div>
                                </div>
                            </div>
                            </pane>
                            
                            <pane title="Tasks &amp; Checklists" id="tasksTab">
                               <div class="tab_content">
                                <div class="comms_notes_wrap">
                                    <div class="AOC_ContentDiv">
                                        <div class="AOC_Content o_d_t_wrap displayBLock">
                                            <ul ng-if="showChecklist">
                                                <li ng-repeat="task in taskAndCheckList track by $index">
                                                    <div class="asignList" >
                                                        <label class="msgstatus_icon"><span><img ng-src="{{task.image}}" alt="{{task.image}}"></span></label>
                                                        <div class="asignDivContent">
                                                            <p class="text">{{task.task_refernce}}: {{task.content}}</p>
                                                            <p><span>Assigned to: {{task.assigned_to}}</span></p>
                                                            <p><span>Date Required: {{task.date}}</span></p>
                                                        </div>
                                                    </div> 
                                                </li>
                                            </ul>
                                            <div ng-if="!showChecklist">
                                                {{checklistErrorMsg}}
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                      
                            </pane>
                        </tabs>
                                <span  class="comms" ng-if="offender.add_comm != 0" ng-click="showAddNotePopup();"></span> 
                    </div>
                    
                </div>

            </div> 
        </div>

        <div ng-include="'views/addCommPopup.html'"></div> 
        <div class="sp_wrap" ng-show="isLargeImageView">
            <div class="slider_wrap">
                <div class="slider_content">

                    <div class="slider_img_wrap">
                        <div class="carousel-demo-fullscreen">

                            <ul rn-carousel rn-carousel-controls rn-carousel-buffered class="carousel1" rn-carousel-index="imageIndex">

                                <li id="tags-list" ng-if="images" ng-model="imageIndex" ng-repeat="image in images track by $index">


                                    <div class="slider_head">
                                        <h2><span class="close_btn" ng-click="closeLargeImageView();"><i class="fa fa-times"></i></span></h2>
                                    </div>
                                    <h2><strong>Image:</strong> <span>(</span>{{image.imagename}} <span ng-if="image.updateddate != null">- {{image.updateddate}}</span> <span ng-if="image.owner != null">by {{image.owner}}</span><span>)</span></h2>
                                    <img ng-src="{{image.imageurl}}" alt="banner{{image.imagename}}"/> 
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <linked-module ng-if="showLinkedModule"> </linked-module>
    <div id="backSelector" class="btn-group action-button icon-btn" ng-click="closeDetail()" ng-if="showLinkedModule">	
        <div class="wrap-btn">							
            <button class="button btn-action radius margin-top" type="button" >	
                <div class="v-flex">
                    <div class="circle-flex">
                        <span class="s-btn-icon"><i class="fa fa-chevron-left"></i></span>
                    </div>
                    <span class="btn-txt">Back</span>
                </div>											
            </button>							                  
        </div>						
    </div>	
</div>
